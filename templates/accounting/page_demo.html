{% extends "base.html" %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<body>
    <nav class="navbar navbar-expand-lg navbar-light sticky-top border-bottom" style="background-color: white;">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img alt="" class="vt-logo-image" src="https://i.imgur.com/za9Otgl.png?1"
                    width=32 focusable="false" aria-hidden="true"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto"></ul>

                <ul class="navbar-nav mt-2 mt-lg-0">
                    <li><a class="nav-link" href="/pc/dashboard"><i class="bi-list"></i> 记账</a></li>
                    {% if user.is_authenticated %}
                    <li><a class="nav-link" href="{% url 'logout' %}"><i class="bi-box-arrow-down"></i>登出</a></li>
                    {% else %}
                    <li><a class="nav-link" href="{% url 'login' %}"><i class="bi-person-circle"></i>登录</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="sidebar">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="/pc/dashboard/billList">
                    <span data-feather="file"></span>
                    我的账单
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pc/dashboard/accountList">
                    <span data-feather="shopping-cart"></span>
                    资金账户
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pc/dashboard/categoryList">
                    <span data-feather="users"></span>
                    收支分类
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/admin/accounting/historyrecord/import/">
                    <span data-feather="bar-chart-2"></span>
                    导入账单
                </a>
            </li>
        </ul>
    </div>

    <main role="main" class="ml-sm-auto col-lg-10 pt-3 px-4">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#expanse" id="#expanse">支出</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#income" id="#income">收入</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#transfer" id="#transfer">转账</a>
            </li>
        </ul>

        <div class="tab-content">
            <div id="expanse" class="container-fluid tab-pane active">
                <br>
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3">
                    <form class="form-inline" method="get">
                        {% for field in myFilter.form %}
                        <p>&nbsp;</p>
                        {{ field|as_crispy_field }}
                        <p>&nbsp;</p>
                        {% endfor %}
                        <button class="btn btn-primary" type="submit">Search</button>
                        </table>
                    </form>
                </div>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>分类</th>
                            <th>金额</th>
                            <th>账户</th>
                            <th>时间</th>
                            <th>备注</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for item in page_obj %}
                        <tr>
                            <td>{{ item.category }}</td>
                            <td>{{ item.amount }}</td>
                            <td>{{ item.account }}</td>
                            <td>{{ item.updated_date}}</td>
                            <td>{{ item.comment }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        {% for page_num in paginator_obj.page_range %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </nav>
            </div>
            <div id="income" class="container-fluid tab-pane"><br>
                income
            </div>
            <div id="transfer" class="container-fluid tab-pane"><br>

                <br>
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3">
                    <p>时间从</p>
                    <span>到</span>
                    <span>分类：</span>
                    <span>账户：</span>
                    <span>来源：</span>
                </div>

                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>分类</th>
                            <th>金额</th>
                            <th>转出账户</th>
                            <th>转入账户</th>
                            <th>时间</th>
                            <th>来源</th>
                            <th>备注</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td>{{ item.category }}</td>
                            <td>{{ item.amount }}</td>
                            <td>${{ item.price }}</td>
                            <td>{{ item.account }}</td>
                            <td>手动记一笔</td>
                            <td>{{ item.VT_Tag }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

            </div>
        </div>
        <!-- <nav aria-label="Page navigation example">
            <ul class="pagination">
                {% for page_num in paginator_obj.page_range %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
                </li>
                {% endfor %}
            </ul>
        </nav> -->
    </main>


    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../../../assets/js/vendor/popper.min.js"></script>
    <script src="../../../../dist/js/bootstrap.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
        feather.replace()
    </script>

    <!-- Graphs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
</body>
{% endblock %}